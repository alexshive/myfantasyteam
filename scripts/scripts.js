"use strict";angular.module("myFantasyTeamApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"home"}).when("/players",{templateUrl:"views/players.html",controller:"PlayersCtrl",controllerAs:"players"}).when("/players/:action/:id",{templateUrl:"views/players.html",controller:"PlayersCtrl",controllerAs:"players"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl",controllerAs:"register"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/teams",{templateUrl:"views/teams.html",controller:"TeamsCtrl",controllerAs:"teams"}).when("/teams/create",{templateUrl:"views/teams/create.html",controller:"CreateteamCtrl",controllerAs:"createteam"}).when("/draft/:id",{templateUrl:"views/draft.html",controller:"DraftCtrl",controllerAs:"draft"}).when("/teams/edit/:id",{templateUrl:"views/teams/edit.html",controller:"EditteamCtrl",controllerAs:"editteam"}).when("/teams/settings/:id",{templateUrl:"views/teams/settings.html",controller:"TeamsettingsCtrl",controllerAs:"teamsettings"}).when("/vs",{templateUrl:"views/vs.html",controller:"VsCtrl",controllerAs:"vs"}).when("/vs/draft/:challengeID",{templateUrl:"views/draft.html",controller:"DraftCtrl",controllerAs:"vs"}).when("/vs/game/:id",{templateUrl:"views/game.html",controller:"GameCtrl",controllerAs:"game"}).when("/vs/:action/:id",{templateUrl:"views/vs.html",controller:"VsCtrl",controllerAs:"vs"}).when("/roster/:teamID/:playerID",{templateUrl:"views/roster-change.html",controller:"RosterchangeCtrl",controllerAs:"roster"}).when("/welcome",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"welcome"}).otherwise({redirectTo:"/"})}]),angular.module("myFantasyTeamApp").controller("MainCtrl",["$scope","$location","$routeParams","$cookies","$http","$window","$route","$templateCache",function(a,b,c,d,e,f,g,h){a.currentLocation=b.path().replace("/",""),a.server="/",a.uid=!1,a.my_team=!1,a.show_teams=!1,a.headerUrl="views/header.html",a.weeks=[];for(var i=1;16>i;i++)a.weeks.push(i);a.currentWeek=1,a.team_id=!1,a.positionOrder=[[0,"QB"],[1,"RB1"],[2,"RB2"],[3,"WR1"],[4,"WR2"],[5,"TE"],[6,"WR3"],[7,"K"],[8,"DEF"],[9,"BN1"],[10,"BN2"],[11,"BN3"],[12,"BN4"],[13,"BN5"]],a.setTeamId=function(b){a.team_id=b},a.setTeam=function(b){a.my_team=b,b.team_id&&(a.team_id=b.team_id)},a.showTeams=function(){a.show_teams=!0},a.hideTeams=function(){a.show_teams=!1,a.team_id=!1},a.setWeek=function(b){a.currentWeek=b},"localhost"===b.host()?a.server="http://localhost/myfantasyteam/app":a.server="http://alexshive.com",a.options=["ALL","QB","RB","WR","TE","K","DEF"],a.position=a.options[1],a.api=a.server+"/api",a.getUser=function(){d.get("uid")&&(a.uid=d.get("uid"),a.username=d.get("username"))},a.getUser(),a.setUser=function(c){d.put("uid",c.uid),d.put("username",c.username),a.uid=c.uid,a.username=c.username,b.path("/")},a.redirect=function(a,c){b.path(a)},a.getLogos=function(){a.logos||e.get(a.api+"/teams/logos").then(function(b){a.logos=b.data.logos})},a.getInfo=function(){e.get(a.api+"/players/info",{params:{week:a.currentWeek}}).then(function(b){a.info=b.data.player_info})},a.getStats=function(b){a.currentWeek&&e.get(a.api+"/players/stats",{params:{week:a.currentWeek}}).then(function(c){a.stats=c.data.stats,b&&b()})},a.logout=function(){d.remove("uid"),d.remove("username"),a.uid=!1,a.username=!1,a.redirect("/")}}]),angular.module("myFantasyTeamApp").controller("PlayersCtrl",["$scope","$http","$routeParams",function(a,b,c){function d(){b.get(a.api+"/teams/my_team",{params:{stats:!0,rank:!0,pos:a.position}}).then(function(b){a.players=b.data.players,a.logos=b.data.logos,a.stats=b.data.stats,a.ranks=[];for(var c=b.data.players,d=b.data.ranks,e=0;e<d.length;e++)for(var f=d[e].player_id,g=d[e].rank,h=0;h<c.length;h++)if(f===c[h].id){var i={rank:g,player:c[h]};a.ranks.push(i);break}})}a.setTeamId(c.id),a.action=c.action,a.selectedPosition="",a.team_id&&(a.editing=!0,b.get(a.api+"/teams",{params:{user_id:a.uid,my_team_id:a.team_id}}).then(function(b){a.setTeam(b.data.team),a.my_players=b.data.my_players,a.my_roster=b.data.roster})),a.select=function(b){a.selectedPlayer=b,a.selectedPosition=b.pos,"RB"===b.pos&&(a.selectedPosition="RB1"),"WR"===b.pos&&(a.selectedPosition="WR1")},a.cancel=function(){a.selectedPlayer=!1},a.updatePosition=function(b){a.selectedPosition=b},a.update=function(){b.post(a.api,{update:!0,player_id:a.selectedPlayer.id,pos:a.selectedPosition,user_id:a.uid,team_id:a.team_id}).then(function(b){var c=b.data;c.complete===!0&&a.redirect("/teams/edit/"+a.team_id)})},a.$watch("position",d)}]),angular.module("myFantasyTeamApp").controller("RegisterCtrl",["$scope","$http",function(a,b){a.createNewAccount=function(){a.error=!1,a.user&&a.password&&a.email||(a.error="All fields required"),a.password!==a.cpassword&&(a.error="Passwords do not match"),a.error||(a.submitted=!0,b.post(a.api+"/user/register",{signup:!0,user:a.user,password:a.password,email:a.email}).then(function(b){var c=b.data;c.complete&&c.uid&&(a.setUser(c),a.redirect("/welcome/"))}))}}]),angular.module("myFantasyTeamApp").controller("LoginCtrl",["$scope","$http",function(a,b){a.doLogin=function(){a.error=!1,a.user&&a.password||(a.error="Both fields required"),a.error||b.post(a.api+"/user/login",{user:a.user,password:a.password}).then(function(b){var c=b.data;c.loggedin===!0&&a.setUser(c),c.error&&(a.error=c.error)})}}]),angular.module("myFantasyTeamApp").controller("TeamsCtrl",["$scope","$http",function(a,b){function c(){b.get(a.api+"/teams/list",{params:{user_id:a.uid}}).then(function(b){a.my_teams=b.data.my_teams,0===a.my_teams.length&&a.redirect("/teams/create")})}a.showTeams(),a.setTeam(!1),c()}]),angular.module("myFantasyTeamApp").directive("errSrc",function(){return{link:function(a,b,c){a.$watch(function(){return c.ngSrc},function(a){a||b.attr("src",c.errSrc)}),b.bind("error",function(){b.attr("src",c.errSrc)})}}}),angular.module("myFantasyTeamApp").controller("CreateteamCtrl",["$scope","$http",function(a,b){a.hideTeams(),a.createTeam=function(){b.post(a.api+"/teams/create",{user_id:a.uid,name:a.name}).then(function(b){var c=b.data;c.created===!0&&a.redirect("/draft/"+c.team_id)})}}]),angular.module("myFantasyTeamApp").controller("EditteamCtrl",["$scope","$http","$routeParams",function(a,b,c){function d(){b.get(a.api+"/teams/my_team",{params:{user_id:a.uid,my_team_id:a.team_id}}).then(function(b){a.setTeam(b.data.team),a.players=b.data.my_players,a.players.sort(function(a,b){return a.pos_id-b.pos_id}),0===a.my_team.length&&a.redirect("/teams/"),a.players.length<10&&a.redirect("/draft/"+a.team_id)})}a.hideTeams(),a.setTeamId(c.id),d(),a.getLogos(),a.$watch("currentWeek",function(){a.getStats(),a.getInfo()})}]),angular.module("myFantasyTeamApp").controller("DraftCtrl",["$scope","$http","$routeParams","$filter","$interval",function(a,b,c,d,e){a.team_id=c.id,a.challengeID=c.challengeID;var f=14,g=!1;a.round=1,a.draftURL="views/roster.html",a.roster=[],a.ready=!1;var h={},i="name";a.sortingOrder=i,a.reverse=!1,a.filteredItems=[],a.groupedItems=[],a.itemsPerPage=15,a.pagedItems=[],a.currentPage=0;var j=function(a,b){return b&&a.name?-1!==a.name.toString().toLowerCase().indexOf(b.toLowerCase()):!0};a.search=function(){a.filteredItems=d("filter")(a.ranks,function(b){for(var c in b)if(j(b[c],a.query))return!0;return!1}),""!==a.sortingOrder&&(a.filteredItems=d("orderBy")(a.filteredItems,a.sortingOrder,a.reverse)),a.currentPage=0,a.groupToPages()},a.groupToPages=function(){a.pagedItems=[];for(var b=0;b<a.filteredItems.length;b++)b%a.itemsPerPage===0?a.pagedItems[Math.floor(b/a.itemsPerPage)]=[a.filteredItems[b]]:a.pagedItems[Math.floor(b/a.itemsPerPage)].push(a.filteredItems[b])},a.range=function(a,b){var c=[];b||(b=a,a=0);for(var d=a;b>d;d++)c.push(d);return c},a.prevPage=function(){a.currentPage>0&&a.currentPage--},a.nextPage=function(){a.currentPage<a.pagedItems.length-1&&a.currentPage++},a.setPage=function(){a.currentPage=this.n},a.select=function(b){var c=!1;if(!a.challengeID||a.draft_order[a.round]===a.uid){switch(b.pos){case"QB":h.QB||c||(h.QB=b,b.my_pos="QB",c=!0);break;case"RB":h.RB1||c||(h.RB1=b,b.my_pos="RB1",c=!0),h.RB2||c||(h.RB2=b,b.my_pos="RB2",c=!0),h.WR3||c||(h.WR3=b,b.my_pos="WR3",c=!0);break;case"WR":h.WR1||c||(h.WR1=b,b.my_pos="WR1",c=!0),h.WR2||c||(h.WR2=b,b.my_pos="WR2",c=!0),h.WR3||c||(h.WR3=b,b.my_pos="WR3",c=!0);break;case"TE":h.TE||c||(h.TE=b,b.my_pos="TE",c=!0);break;case"K":h.K||c||(h.K=b,b.my_pos="K",c=!0);break;case"DEF":h.DEF||c||(h.DEF=b,b.my_pos="DEF",c=!0)}h.BN1||c||(h.BN1=b,b.my_pos="BN1",c=!0),h.BN2||c||(h.BN2=b,b.my_pos="BN2",c=!0),h.BN3||c||(h.BN3=b,b.my_pos="BN3",c=!0),h.BN4||c||(h.BN4=b,b.my_pos="BN4",c=!0),h.BN5||c||(h.BN5=b,b.my_pos="BN5",c=!0),c===!0&&(a.roster.push(b.name),a.searchPlayer="",a.save(b)),a.my_players=h}},a.loadPlayers=function(){h=a.my_players},a.setPosition=function(b){a.position=b},a.save=function(c){return a.challengeID&&c?void b.post(a.api+"/challenges/draft",{challengeID:a.challengeID,user_id:a.uid,playerID:c.id,round:a.round,pos:c.my_pos}).then(function(b){b.data.complete&&(a.round+=1,a.draftURL="views/roster.html?round="+a.round,a.my_players=h)}):void b.post(a.api+"/user/draft",{playerID:c.id,round:a.round,pos:c.my_pos,user_id:a.uid,team_id:a.team_id}).then(function(b){b.data.complete&&(a.round+=1,a.my_players=h),k.checkCompleted()})};var k=this;a.players=[],k.checkCompleted=function(){a.round>2*f&&(a.challengeID?b.post(a.api+"/challenges/draft",{challengeID:a.challengeID,gametime:1}).then(function(b){b.data.game_ready&&a.redirect("/vs/game/"+a.challengeID)}):a.redirect("/teams/edit/"+a.team_id))},k.getRanks=function(){b.get(a.api+"/players/rank").then(function(b){var c=b.data.ranks;a.ranks=[];for(var d=0;d<c.length;d++)for(var e=c[d].player_id,f=c[d].rank,g=0;g<a.players.length;g++)if(e===a.players[g].id){var h={rank:f,player:a.players[g]};a.ranks.push(h);break}a.search()})},k.getChallengeDetails=function(){b.get(a.api+"/challenges/vs",{params:{draft_id:a.challengeID}}).then(function(b){a.round=parseInt(b.data.round),a.draft_order=b.data.draft_order,k.getChallengePlayers()})},k.getChallengePlayers=function(){a.hideTeams(),a.setTeam(!1),b.get(a.api+"/challenges/players",{params:{challengeID:a.challengeID,user_id:a.uid}}).then(function(b){a.unavailablePlayers=b.data.players,b.data.my_players&&(h=b.data.my_players),a.my_players=h,k.getPlayerList()})},k.getSinglePlayerDetails=function(){b.get(a.api+"/user/draft",{params:{team_id:a.team_id,user_id:a.uid}}).then(function(b){var c=b.data.my_team;c&&(a.setTeam(c),a.round=parseInt(c.round),a.showTeams()),a.unavailablePlayers=b.data.players,b.data.my_players&&(h=b.data.my_players),a.my_players=h,k.getPlayerList()})},k.getPlayerList=function(){b.get(a.api+"/players/list",{params:{pos:a.position}}).then(function(b){a.players=b.data.players,k.getRanks(),k.checkCompleted()})},k.get=function(){g||(g=e(k.getChallengeDetails,5e3)),a.challengeID?k.getChallengeDetails():k.getSinglePlayerDetails()},a.getLogos(),a.$watch("position",k.get)}]),angular.module("myFantasyTeamApp").filter("startFrom",function(){return function(a,b){return a?(b=+b,a.slice(b)):void 0}}),angular.module("myFantasyTeamApp").controller("TeamsettingsCtrl",["$scope","$routeParams","$http",function(a,b,c){function d(){a.team_id>0&&c.get(a.api,{params:{user_id:a.uid,my_team_id:a.team_id}}).then(function(b){a.new_team_name=b.data.team.name,a.setTeam(b.data.team)})}a.setTeamId(b.id),a.save=function(){c.post(a.api,{my_team_id:a.team_id,user_id:a.uid,team_name:a.my_team.name}).then(function(b){a.redirect("teams")})},a.$watch("team_id",d)}]),angular.module("myFantasyTeamApp").controller("VsCtrl",["$scope","$http","$routeParams",function(a,b,c){a.hideTeams(),a.getUser(),a.acceptChallenge=function(c){b.post(a.api+"/challenges/accept",{challenge_id:c}).then(function(b){b.data.accepted>0&&a.redirect("/vs/draft/"+c)})},a.rejectChallenge=function(c){b.post(a.api+"/challenges/reject",{challenge_id:c}).then(function(b){if(b.data.rejected>0)for(var d=0;d<a.challenges.length;d++)if(a.challenges[d].id===c){a.challenges.splice(d,1);break}})},a.challengePlayer=function(c,d){b.post(a.api+"/user/challenge",{challenge_user:c,user_id:a.uid}).then(function(b){a.sentList.push(c),a.message=d+" has been challenged"})};var d=function(){b.get(a.api+"/user/list").then(function(b){a.users=b.data.users,e()})},e=function(){b.get(a.api+"/user/friends",{params:{user_id:a.uid}}).then(function(b){var c=b.data;a.friendList=c.friendList,a.friendSentRequest=c.friendSentRequest,a.friendReceiveRequest=c.friendReceiveRequest,a.friends=c.friends,f()})};a.confirmFriend=function(c){b.post(a.api+"/user/friends",{confirm:!0,user_id:a.uid,friend_id:c}).then(function(b){if(b.data.added===!0){var d=a.friendReceiveRequest.indexOf(c);a.friendReceiveRequest.splice(d,1),a.friendList.push(c),a.friends=b.data.friends}})},a.addFriend=function(c){b.post(a.api+"/user/friends",{user_id:a.uid,friend_id:c}).then(function(b){b.data.request===!0&&a.friendSentRequest.push(c)})};var f=function(){b.get(a.api+"/challenges/list",{params:{user_id:a.uid}}).then(function(b){var c=b.data;a.challenges=c.challenges,a.sent=c.sent,a.received=c.received,a.drafts=c.drafts,a.games=c.games,a.gameList=c.gameList,a.sentList=c.sentList,a.receivedList=c.receivedList,a.draftList=c.draftList,a.challengesList=c.challengesList})};d()}]),angular.module("myFantasyTeamApp").controller("GameCtrl",["$scope","$http","$routeParams",function(a,b,c){function d(b){return a.stats[b.id]?parseFloat(a.stats[b.id].week_points).round(2):0}Number.prototype.round=function(a){return a=a||10,parseFloat(this.toFixed(a))};var e=function(){a.your_points=0,a.their_points=0,a.your_points+=d(a.my_players.QB),a.your_points+=d(a.my_players.RB1),a.your_points+=d(a.my_players.RB2),a.your_points+=d(a.my_players.WR1),a.your_points+=d(a.my_players.WR2),a.your_points+=d(a.my_players.TE),a.your_points+=d(a.my_players.WR3),a.your_points+=d(a.my_players.K),a.your_points+=d(a.my_players.DEF),a.your_points=parseFloat(a.your_points).round(2),a.their_points+=d(a.their_players.QB),a.their_points+=d(a.their_players.RB1),a.their_points+=d(a.their_players.RB2),a.their_points+=d(a.their_players.WR1),a.their_points+=d(a.their_players.WR2),a.their_points+=d(a.their_players.TE),a.their_points+=d(a.their_players.WR3),a.their_points+=d(a.their_players.K),a.their_points+=d(a.their_players.DEF),a.their_points=parseFloat(a.their_points).round(2)},f=function(){b.get(a.api+"/game/players",{params:{user_id:a.uid,challenge_id:c.id}}).then(function(b){a.my_players=b.data.my_players,a.their_players=b.data.their_players,a.team_id=b.data.team_id,e()})};a.$watch("currentWeek",function(){a.getStats(f)})}]),angular.module("myFantasyTeamApp").controller("HomeCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("myFantasyTeamApp").controller("RosterchangeCtrl",["$scope","$routeParams",function(a,b){console.debug(b.playerID)}]),angular.module("myFantasyTeamApp").run(["$templateCache",function(a){a.put("views/draft.html",'<div class="row"> <div class="col-sm-12" ng-if="challengeID" ng-cloak> <h2 class="text-center">Head to Head Draft</h2> </div> <div class="col-sm-12" ng-if="draft_order"> <h3 class="text-center" ng-show="draft_order[round] === uid" ng-cloak>Select a player below</h3> <div class="alert alert-info text-center" ng-show="draft_order[round] !== uid" ng-cloak>Please wait for your turn in the next round.</div> </div> <div class="col-sm-6"> <h3>Round {{round}}</h3> <div class="row"> <div class="col-sm-12"> <input type="text" class="form-control" ng-change="search()" ng-model="searchPlayer" placeholder="Search for Player"> </div> <div class="col-sm-12"> <div class="btn-group btn-group-justified" role="group"> <a href ng-click="setPosition(option)" ng-repeat="option in options" ng-class="{\'active\': option == position}" class="btn btn-default">{{option}}</a> </div> </div> </div> <ul class="pager"> <li class="previous" ng-class="{disabled: currentPage == 0}"> <a href ng-click="prevPage()">« Prev</a> </li> <li class="next" ng-class="{disabled: currentPage == pagedItems.length - 1}"> <a href ng-click="nextPage()">Next »</a> </li> </ul> <table> <tbody> <tr ng-repeat="rank in pagedItems[currentPage] | orderBy:sortingOrder:reverse | filter: searchPlayer" ng-include src="\'views/player-row.html\'" ng-init="player = rank.player;position = rank.player.pos;add = true;selected = false;showplayerimage = true;showteam = true;showpos = true;" ng-show="roster.indexOf(rank.player.name) < 0" ng-hide="unavailablePlayers.indexOf(rank.player.id) >= 0" class="player-row"></tr> </tbody> </table> <ul class="pager"> <li class="previous" ng-class="{disabled: currentPage == 0}"> <a href ng-click="prevPage()">« Prev</a> </li> <li class="next" ng-class="{disabled: currentPage == pagedItems.length - 1}"> <a href ng-click="nextPage()">Next »</a> </li> </ul> </div> <div class="col-sm-6"> <h3>Player Roster</h3> <ng-include src="draftURL" onload="roster = my_players;showpos = true;showteam = true;showplayerimage = true" ng-if="my_players"></ng-include> </div> </div>'),a.put("views/game.html",'<div class="row"> <div class="col-sm-12"> <h2 class="text-center">Game Center</h2> </div> <div class="col-sm-12" ng-show="message" ng-cloak> <div class="alert alert-info text-center">{{message}}</div> </div> <div class="col-sm-6"> <div class="row"> <div class="col-sm-6"> <h3>You</h3> </div> <div class="col-sm-6 text-right"> <h3>{{your_points}}</h3> </div> </div> <ng-include src="\'views/roster.html\'" ng-init="roster = my_players;selected = true;showpos = true;showpoints = true;" ng-if="my_players"></ng-include> </div> <div class="col-sm-6"> <div class="row"> <div class="col-sm-6"> <h3>Friend</h3> </div> <div class="col-sm-6 text-right"> <h3>{{their_points}}</h3> </div> </div> <ng-include src="\'views/roster.html\'" ng-init="roster = their_players;showpos = true;showpoints = true" ng-if="their_players"></ng-include> </div> </div>'),a.put("views/header.html",'<div class="header"> <div class="navbar navbar-default" role="navigation"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">My Fantasy Team</a> </div> <div class="collapse navbar-collapse" id="js-navbar-collapse"> <ul class="nav navbar-nav" ng-show="uid" ng-cloak> <!-- <li><a href="#/" ng-click="hideTeams()">Home</a></li> --> <!-- <li ng-show="team_id" ng-cloak><a ng-href="#/players/add/{{team_id}}">Add Player</a></li> --> <!-- <li><a ng-href="#/teams">Your Teams</a></li> --> <li><a ng-href="#/vs">Challenge Friends</a></li> </ul> <ul class="nav navbar-nav navbar-right" ng-show="uid" ng-cloak> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">{{username}} <span class="caret"></span></a> <ul class="dropdown-menu"> <!-- <li role="separator" class="divider"></li> --> <li><a ng-href="#/" ng-click="logout()">Logout</a></li> </ul> </li> </ul> </div> </div> </div> </div> <div class="team-header" ng-show="show_teams" ng-cloak> <div class="container"> <div class="row" ng-if="my_team"> <div class="col-sm-10"> <h2>{{my_team.name}}</h2> </div> <div class="col-sm-2 text-right"> <a class="btn btn-default" ng-if="team_id" ng-href="#/teams/settings/{{team_id}}">Settings</a> </div> </div> <div class="row" ng-show="show_teams" ng-hide="my_team" ng-cloak> <div class="col-sm-10"> <h2>Select Team</h2> </div> <div class="col-sm-2 text-right"> <a ng-href="#/teams/create" class="btn btn-primary">Create New Team</a> </div> </div> </div> </div>'),a.put("views/home.html",'<div class="row intro" ng-hide="uid" ng-cloak> <div class="col-sm-6"> <h1>Build your fantasy team</h1> <h2>Practice or battle head-to-head</h2> <h3>Play for free</h3> <!-- <a class="btn btn-block btn-primary" ng-href="#/login">Login</a> --> </div> <div class="col-sm-6"> <div ng-controller="LoginCtrl"> <ng-include src="\'views/login.html\'"></ng-include> </div> </div> </div> <div ng-show="uid" ng-cloak> <div class="col-sm-12 bg-success" ng-if="currentLocation === \'welcome\'"> <p>Welcome {{username}}!</p> </div> <div class="col-sm-6"> <h1>Player News</h1> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid nihil eveniet dolores pariatur quas. Aperiam ullam dicta dolore expedita, repudiandae rerum sint, quibusdam omnis iure doloribus adipisci ab quo necessitatibus?</p> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid nihil eveniet dolores pariatur quas. Aperiam ullam dicta dolore expedita, repudiandae rerum sint, quibusdam omnis iure doloribus adipisci ab quo necessitatibus?</p> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid nihil eveniet dolores pariatur quas. Aperiam ullam dicta dolore expedita, repudiandae rerum sint, quibusdam omnis iure doloribus adipisci ab quo necessitatibus?</p> </div> <div class="col-sm-6"> <h2>Top players this week</h2> <table> <tr> <td>1.</td> <td>Tom Brady</td> <td>30.0</td> </tr> </table> </div> </div>'),a.put("views/login.html",'<h2>Login</h2> <div class="error bg-danger" ng-cloak ng-show="error">{{error}}</div> <form ng-submit="doLogin()"> <div class="row"> <div class="col-sm-12"> <span class="form-label">User: </span> <input name="user" type="text" ng-model="$parent.user" class="form-control"> </div> <div class="col-sm-12"> <span class="form-label">Password: </span> <input name="password" type="password" ng-model="$parent.password" class="form-control"> </div> <div class="col-sm-6"> <span class="form-label"></span> <input type="submit" value="Login" class="btn btn-primary"> </div> <div class="col-sm-6 text-right"> <span class="form-label"></span> <a class="btn btn-link" ng-href="#/register">Register</a> </div> </div> </form>'),a.put("views/player-row-header.html",'<td class="sort" ng-if="organize == true"></td> <td class="pos" ng-if="showpos == true">POS</td> <td class="select" ng-if="selected == true">Move</td> <td class="player"></td> <td class="opp" ng-if="showinfo">Opp</td> <td class="pass-yds" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">Passing Yds</td> <td class="pass-td" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">Passing TD</td> <td class="pass-int" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">Passing INT</td> <td class="rush-yds" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">Rushing Yds</td> <td class="rush-td" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">Rushing TD</td> <td class="pat-made" ng-if="showstats == true && player.pos == \'K\'">PAT Made</td> <td class="kick-yds" ng-if="showstats == true && player.pos == \'K\'">0-19</td> <td class="kick-yds" ng-if="showstats == true && player.pos == \'K\'">20-29</td> <td class="kick-yds" ng-if="showstats == true && player.pos == \'K\'">30-39</td> <td class="kick-yds" ng-if="showstats == true && player.pos == \'K\'">40-49</td> <td class="kick-yds" ng-if="showstats == true && player.pos == \'K\'">50+</td> <td class="sack" ng-if="showstats == true && player.pos == \'DEF\'">Sack</td> <td class="int" ng-if="showstats == true && player.pos == \'DEF\'">INT</td> <td class="fumble" ng-if="showstats == true && player.pos == \'DEF\'">Fumble Rec</td> <td class="safety" ng-if="showstats == true && player.pos == \'DEF\'">Safety</td> <td class="td" ng-if="showstats == true && player.pos == \'DEF\'">TD</td> <td class="td-ret" ng-if="showstats == true && player.pos == \'DEF\'">TD Ret</td> <td class="pts-allowed" ng-if="showstats == true && player.pos == \'DEF\'">Pts Allowed</td> <td class="week-points" ng-if="showpoints">Points</td> <td class="add" ng-if="add == true && selected == false"></td>'),a.put("views/player-row.html",'<td class="sort" ng-if="organize == true"><span class="handle">::</span></td> <td class="position" ng-if="showpos == true">{{my_position || position}}</td> <td class="select" ng-if="selected == true"><a name="selectedPosition" ng-model="selectedPosition" ng-href="#/roster/{{team_id}}/{{player.id}}" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-menu-hamburger"></span></a></td> <td class="player"> <span class="team" ng-if="showteam == true"><img ng-src="images/teams/{{logos[player.team_id]}}.png" ng-if="player"><img ng-src="images/team.png" ng-if="!player"></span> <span class="player-image" ng-if="showplayerimage == true"> <span class="image"><img ng-src="images/players/{{player.id}}.png" err-src="images/player.png"></span> </span> <span class="name">{{player.name || \'(empty)\'}}</span> </td> <td ng-if="showinfo" class="opp">{{info[player.id].opponent || \'N/A\'}}</td> <td class="pass-yds" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">{{stats[player.id].stats[5] || "-"}}</td> <td class="pass-td" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">{{stats[player.id].stats[6] || "-"}}</td> <td class="pass-int" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">{{stats[player.id].stats[7] || "-"}}</td> <td class="rush-yds" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">{{stats[player.id].stats[14] || "-"}}</td> <td class="rush-td" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">{{stats[player.id].stats[15] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'K\'">{{stats[player.id].stats[33] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'K\'">{{stats[player.id].stats[35] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'K\'">{{stats[player.id].stats[36] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'K\'">{{stats[player.id].stats[37] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'K\'">{{stats[player.id].stats[38] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'K\'">{{stats[player.id].stats[39] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[45] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[46] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[47] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[49] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[50] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[53] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[54] || "-"}}</td> <td class="week-points" ng-if="showpoints">{{stats[player.id].week_points || "0.00"}}</td> <td class="text-right" ng-if="add == true && selected == false"><a ng-click="select(player)" class="btn btn-default"><span class="glyphicon glyphicon-plus"></span> Add</a></td>'),a.put("views/players.html",'<div ng-show="selectedPlayer" ng-cloak> <h3>Selected Player</h3> <table> <tr> <!-- <td class="text-center" width="20"><strong>{{selectedPlayer.pos}}</strong></td>\n				<td class="text-center" width="20"><span class="team"><img ng-src="images/teams/{{logos[selectedPlayer.team_id]}}.png" /></span></td>\n				<td class="text-center" width="70"><span class="player"><span class="image"><img ng-src="images/players/{{selectedPlayer.id}}.png" err-src="images/player.png" /></span></span></td>\n				<td><span class="name">{{selectedPlayer.name}}</span></td>\n				<td class="text-right">{{stats[selectedPlayer.id].week_points || "0.00"}}</td> --> </tr><tr ng-include src="\'views/player-row.html\'" ng-init="player = selectedPlayer;position = selectedPlayer.pos;selected = false;" ng-if="selectedPlayer"></tr>  </table> <br> <h3>Replace with existing</h3> <table data-ng-show="selectedPlayer" class="table-striped"> <thead> <tr ng-include src="\'views/player-row-header.html\'" ng-init="select = true;showstats = false" ng-if="selectedPlayer"></tr> </thead> <tbody> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.QB;position = \'QB\';selected = true;" ng-if="selectedPlayer.pos === \'QB\'"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.RB1;position = \'RB1\';selected = true;" ng-if="selectedPlayer.pos === \'RB\'"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.RB2;position = \'RB2\';selected = true;" ng-if="selectedPlayer.pos === \'RB\'"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.WR1;position = \'WR1\';selected = true;" ng-if="selectedPlayer.pos === \'WR\'"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.WR2;position = \'WR2\';selected = true;" ng-if="selectedPlayer.pos === \'WR\'"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.TE;position = \'TE\';selected = true;" ng-if="selectedPlayer.pos === \'TE\'"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.WR3;position = \'WR3\';selected = true;" ng-if="selectedPlayer.pos === \'WR\'"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.K;position = \'K\';selected = true;" ng-if="selectedPlayer.pos === \'K\'"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.DEF;position = \'DEF\';selected = true;" ng-if="selectedPlayer.pos === \'DEF\'"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.BN1;position = \'BN1\';selected = true;" ng-if="selectedPlayer"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.BN2;position = \'BN2\';selected = true;" ng-if="selectedPlayer"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.BN3;position = \'BN3\';selected = true;" ng-if="selectedPlayer"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.BN4;position = \'BN4\';selected = true;" ng-if="selectedPlayer"></tr> <tr ng-include src="\'views/player-row.html\'" ng-init="player = my_players.BN5;position = \'BN5\';selected = true;" ng-if="selectedPlayer"></tr> </tbody> </table> <br> <p class="text-center"> <a ng-click="update()" class="btn btn-primary">Confirm Replace</a> <a ng-click="cancel()" class="btn btn-link">Cancel</a> </p> </div> <div ng-hide="selectedPlayer"> <div class="row"> <div class="col-sm-6"> <h2>Player List</h2> </div> <div class="col-sm-4"> <input type="text" ng-model="searchPlayer" class="form-control" placeholder="Search Player"> </div> <div class="col-sm-2 text-right"> <form> <select class="form-control" name="position" ng-model="position" ng-options="option for option in options"></select> </form> </div> </div> <table class="table-striped"> <thead> <tr ng-include src="\'views/player-row-header.html\'" ng-if="!selectedPlayer" ng-init="add = true;showstats = true;selected = false"></tr> </thead> <tbody> <tr ng-repeat="rank in ranks | filter: searchPlayer" ng-include src="\'views/player-row.html\'" ng-init="player = rank.player;position = rank.player.pos;add = true;selected = false;showstats = true" ng-if="!selectedPlayer && my_roster.indexOf(rank.player.name) < 0"></tr> </tbody> </table></div>'),a.put("views/register.html",'<h2>Register</h2> <div class="error bg-danger" ng-cloak ng-show="error">{{error}}</div> <form ng-submit="createNewAccount()"> <div class="row"> <div class="col-sm-12"> <span class="form-label">User: </span> <input name="user" type="text" ng-model="user" class="form-control"> </div> <div class="col-sm-12"> <span class="form-label">Password: </span> <input name="password" type="password" ng-model="password" class="form-control"> </div> <div class="col-sm-12"> <span class="form-label">Confirm Password: </span> <input name="cpassword" type="password" ng-model="cpassword" class="form-control"> </div> <div class="col-sm-12"> <span class="form-label">Email: </span> <input name="email" type="email" ng-model="email" class="form-control"> </div> <div class="col-sm-12"> <br> <input type="submit" value="Register" class="btn btn-primary"> </div> </div> </form>'),
a.put("views/roster-change.html","<h1>Roster Change</h1>"),a.put("views/roster.html",'<table class="table table-striped table-hover"> <thead> <tr ng-include="\'views/player-row-header.html\'" class="player-row-header"></tr> </thead> <tbody> <!-- QB --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'QB\'" class="player-row" ng-if="!roster.QB"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.QB;position = \'QB\'" class="player-row" ng-if="roster.QB"></tr> <!-- RB1 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'RB\'" class="player-row" ng-if="!roster.RB1"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.RB1;position = \'RB\'" class="player-row" ng-if="roster.RB1"></tr> <!-- RB2 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'RB\'" class="player-row" ng-if="!roster.RB2"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.RB2;position = \'RB\'" class="player-row" ng-if="roster.RB2"></tr> <!-- WR1 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'WR\'" class="player-row" ng-if="!roster.WR1"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.WR1;position = \'WR\'" class="player-row" ng-if="roster.WR1"></tr> <!-- WR2 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'WR\'" class="player-row" ng-if="!roster.WR2"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.WR2;position = \'WR\'" class="player-row" ng-if="roster.WR2"></tr> <!-- TE --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'TE\'" class="player-row" ng-if="!roster.TE"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.TE;position = \'TE\'" class="player-row" ng-if="roster.TE"></tr> <!-- WR3 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'W/R\'" class="player-row" ng-if="!roster.WR3"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.WR3;position = \'W/R\'" class="player-row" ng-if="roster.WR3"></tr> <!-- K --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'K\'" class="player-row" ng-if="!roster.K"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.K;position = \'K\'" class="player-row" ng-if="roster.K"></tr> <!-- DEF --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'DEF\'" class="player-row" ng-if="!roster.DEF"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.DEF;position = \'DEF\'" class="player-row" ng-if="roster.DEF"></tr> <!-- BN1 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'BN\'" class="player-row" ng-if="!roster.BN1"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.BN1;position = \'BN\'" class="player-row" ng-if="roster.BN1"></tr> <!-- BN2 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'BN\'" class="player-row" ng-if="!roster.BN2"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.BN2;position = \'BN\'" class="player-row" ng-if="roster.BN2"></tr> <!-- BN3 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'BN\'" class="player-row" ng-if="!roster.BN3"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.BN3;position = \'BN\'" class="player-row" ng-if="roster.BN3"></tr> <!-- BN4 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'BN\'" class="player-row" ng-if="!roster.BN4"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.BN4;position = \'BN\'" class="player-row" ng-if="roster.BN4"></tr> <!-- BN5 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'BN\'" class="player-row" ng-if="!roster.BN5"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.BN5;position = \'BN\'" class="player-row" ng-if="roster.BN5"></tr> </tbody> </table>'),a.put("views/teams.html",'<div class="row"> <div class="col-sm-12"> <h4 ng-if="!my_teams">No teams</h4> <ul class="list-group"> <li class="list-group-item" ng-repeat="team in my_teams"><a class="name" ng-href="#/teams/edit/{{team.team_id}}">{{team.name}}</a></li> </ul> </div> </div>'),a.put("views/teams/create.html",'<h2>Create a team</h2> <form ng-submit="createTeam()"> <div class="row"> <div class="col-sm-12"> <span class="form-label">Team Name: </span> <input type="text" name="name" ng-model="name" class="form-control"> </div> <div class="col-sm-12"> <br> <input type="submit" value="Add Team" class="btn btn-primary"> </div> </div> </form>'),a.put("views/teams/edit.html",'<div class="row"> <div class="col-sm-12"> <div class="weeks"> Week: <div ng-repeat="week in weeks" class="week"> <a ng-click="setWeek(week)" ng-class="{\'active\': currentWeek == week}">{{week}}</a> </div> </div> </div> <div class="col-sm-12"> <table> <thead> <tr ng-include src="\'views/player-row-header.html\'" ng-init="showinfo = true;showpoints = true;" class="player-row-header" ng-if="players"></tr> </thead> <tbody> <tr ng-repeat="player in players" ng-include src="\'views/player-row.html\'" ng-init="my_position = player.my_pos; position = player.pos;showinfo = true;showpoints = true;" class="player-row"></tr> </tbody> </table> </div> </div>'),a.put("views/teams/settings.html",'<div class="row"> <div class="col-sm-12"> <h2>Settings</h2> <form> <div class="form-group"> <label>Team Name: <input type="text" ng-model="new_team_name" class="form-control"> </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="delete_team"> Delete Team </label> </div> <input type="button" value="Save Settings" ng-click="save()" class="btn btn-primary"> </form> </div> </div>'),a.put("views/vs.html",'<div class="row"> <div class="col-sm-12" ng-show="message" ng-cloak> <div class="bg-success text-center"><p>{{message}}</p></div> </div> <div class="col-sm-12" ng-if="games.length > 0"> <h2>Game time</h2> <ul class="list-group"> <li class="list-group-item" ng-repeat="game in games"> <div class="row"> <div class="col-sm-6"> <div class="name">{{game.friend_name}}</div> </div> <div class="col-sm-6 text-right buttons"> <a ng-href="#/vs/game/{{game.id}}" class="btn btn-success">Enter Game Center</a> </div> </div> </li> </ul> </div> <div class="col-sm-12" ng-if="drafts.length > 0"> <h2>Drafts</h2> <ul class="list-group"> <li class="list-group-item" ng-repeat="draft in drafts"> <div class="row"> <div class="col-sm-6"> <div class="name">{{draft.name}}</div> </div> <div class="col-sm-6 text-right buttons"> <a ng-href="#/vs/draft/{{draft.id}}" class="btn btn-success">Enter Draft</a> </div> </div> </li> </ul> </div> <div class="col-sm-12" ng-if="received.length > 0"> <h2>You\'ve been challenged</h2> <ul class="list-group"> <li class="list-group-item" ng-repeat="challenge in received"> <div class="row"> <div class="col-sm-6"> <div class="name">{{challenge.friend_name}}</div> </div> <div class="col-sm-6 text-right buttons"> <a ng-click="acceptChallenge(challenge.id, challenge.friend_name)" class="btn btn-success">Accept Challenge</a> <a ng-click="rejectChallenge(challenge.id)" class="btn btn-danger">Reject</a> </div> </div> </li> </ul> </div> <div class="col-sm-6"> <h2 ng-show="friendReceiveRequest.length > 0">Friend Requests</h2> <ul class="list-group"> <li class="list-group-item" ng-repeat="user in users" ng-hide="user.id === uid || friendReceiveRequest.indexOf(user.id) < 0 || friendList.indexOf(user.id) >= 0" ng-cloak> <div class="row"> <div class="col-sm-6"> <div class="name">{{user.username}}</div> </div> <div class="col-sm-6 text-right buttons"> <a ng-click="confirmFriend(user.id)" ng-show="friendReceiveRequest.indexOf(user.id) >= 0" class="btn btn-success">Confirm Friend</a> </div> </div> </li> </ul> <h2 ng-if="friends">Friends</h2> <ul class="list-group"> <li class="list-group-item" ng-repeat="friend in friends"> <div class="row"> <div class="col-sm-6"> <div class="name">{{friend.username}}</div> </div> <div class="col-sm-6 text-right buttons"> <a ng-href="#/vs/draft/{{challengesList[friend.id]}}" ng-if="draftList.indexOf(friend.id) >= 0" class="btn btn-default">Enter Draft</a> <a ng-click="challengePlayer(friend.id, friend.username)" ng-if="draftList.indexOf(friend.id) < 0 && gameList.indexOf(friend.id) < 0 && sentList.indexOf(friend.id) < 0 && receivedList.indexOf(friend.id) < 0" class="btn btn-success">Challenge</a> <span class="label label-default" ng-if="draftList.indexOf(friend.id) < 0 && sentList.indexOf(friend.id) >= 0"><i>Pending response</i></span> <a ng-if="draftList.indexOf(friend.id) >= 0 && gameList.indexOf(friend.id) >= 0" ng-href="#/vs/game/{{challengesList[friend.id]}}" class="btn btn-primary">Enter Matchup</a> </div> </div> </li> </ul> </div> <div class="col-sm-6"> <h2 ng-if="users.length > 1">Available Players</h2> <ul class="list-group"> <li class="list-group-item" ng-repeat="user in users" ng-show="user.id !== uid && friendList.indexOf(user.id) < 0 && friendReceiveRequest.indexOf(user.id) < 0" ng-cloak> <div class="row"> <div class="col-sm-6"> <div class="name">{{user.username}}</div> </div> <div class="col-sm-6 text-right buttons"> <a ng-click="addFriend(user.id)" ng-show="friendSentRequest.indexOf(user.id) < 0 && friendReceiveRequest.indexOf(user.id) < 0" class="btn btn-default">Send Friend Request</a> <span class="label label-default" ng-show="friendSentRequest.indexOf(user.id) >= 0 && friendReceiveRequest.indexOf(user.id) < 0"><i>Pending response</i></span> </div> </div> </li> </ul> </div> </div>')}]);