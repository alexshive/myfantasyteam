"use strict";angular.module("myFantasyTeamApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"home"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl",controllerAs:"register"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/settings",{templateUrl:"views/playersettings.html",controller:"PlayerSettingsCtrl",controllerAs:"settings"}).when("/practice",{templateUrl:"views/practice.html",controller:"PracticeCtrl",controllerAs:"practice"}).when("/practice/draft/:week",{templateUrl:"views/draft.html",controller:"DraftCtrl",controllerAs:"draft"}).when("/practice/game/:week",{templateUrl:"views/game.html",controller:"PracticeGameCtrl",controllerAs:"practicegame"}).when("/users",{templateUrl:"views/users.html",controller:"UsersCtrl",controllerAs:"users"}).when("/challenges",{templateUrl:"views/challenges.html",controller:"ChallengesCtrl",controllerAs:"challenges"}).when("/friends",{templateUrl:"views/friends.html",controller:"FriendsCtrl",controllerAs:"friends"}).when("/friends/requests",{templateUrl:"views/friends/requests.html",controller:"FriendRequestsCtrl",controllerAs:"friendrequests"}).when("/challenge/:userID",{templateUrl:"views/challenge.html",controller:"ChallengeCtrl",controllerAs:"challenge"}).when("/draft/:challengeID",{templateUrl:"views/draft.html",controller:"DraftCtrl",controllerAs:"vs"}).when("/game/:id",{templateUrl:"views/game.html",controller:"GameCtrl",controllerAs:"game"}).when("/game/:id/settings",{templateUrl:"views/gamesettings.html",controller:"GameSettingsCtrl",controllerAs:"gamesettings"}).when("/game/:gameID/players",{templateUrl:"views/players.html",controller:"PlayersCtrl",controllerAs:"players"}).when("/game/:gameID/roster/:teamID/:playerID",{templateUrl:"views/roster-change.html",controller:"RosterchangeCtrl",controllerAs:"roster"}).when("/roster/:teamID/:playerID",{templateUrl:"views/roster-change.html",controller:"RosterchangeCtrl",controllerAs:"roster"}).when("/welcome",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"welcome"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl",controllerAs:"profile"}).otherwise({redirectTo:"/"})}]),angular.module("myFantasyTeamApp").controller("MainCtrl",["$scope","$location","$routeParams","$cookies","$http","$route","$uibModal",function(a,b,c,d,e,f,g){a.currentLocation=b.path().replace("/",""),a.server="/",a.uid=!1,a.my_team=!1,a.show_teams=!1,a.headerUrl="views/header.html",a.weeks=[];for(var h=1;16>h;h++)a.weeks.push(h);a.team_id=!1,a.positionOrder=[[0,"QB"],[1,"RB1"],[2,"RB2"],[3,"WR1"],[4,"WR2"],[5,"TE"],[6,"WR3"],[7,"K"],[8,"DEF"],[9,"BN1"],[10,"BN2"],[11,"BN3"],[12,"BN4"],[13,"BN5"]],a.setTeamId=function(b){a.team_id=b},a.setTeam=function(b){a.my_team=b,b.team_id&&(a.team_id=b.team_id)},a.showTeams=function(){a.show_teams=!0},a.hideTeams=function(){a.show_teams=!1,a.team_id=!1},a.setWeek=function(b){a.currentWeek=b},"localhost"===b.host()?a.api="http://localhost/myfantasyteam/app/api":a.api="http://topdog.herokuapp.com",a.options=["ALL","QB","RB","WR","TE","K","DEF"],a.position=a.options[1],Number.prototype.round=function(a){return a=a||10,parseFloat(this.toFixed(a))},a.points=function(b){return a.stats&&b&&a.stats[b.id]?parseFloat(a.stats[b.id].week_points).round(2):0},a.getUser=function(){d.get("uid")&&(a.uid=d.get("uid"),a.username=d.get("username"),a.displayname=d.get("displayname"))},a.getCurrentWeek=function(b){e.get(a.api+"/players/game").then(function(c){a.setWeek(c.data.week),a.teamsPlayed=c.data.teamsPlayed,"function"==typeof b&&b()})},a.getUser(),a.setUser=function(c){d.put("uid",c.uid),d.put("username",c.username),a.uid=c.uid,a.username=c.username,a.setUserDisplay(c),b.path("/")},a.setUserDisplay=function(b){var c=b.username;b.displayname&&(c=b.displayname),d.put("displayname",c),a.displayname=c},a.redirect=function(a,c){b.path(a)},a.getLogos=function(){a.logos||e.get(a.api+"/game/logos").then(function(b){a.logos=b.data.logos})},a.getInfo=function(){e.get(a.api+"/players/info",{params:{week:a.currentWeek}}).then(function(b){a.info=b.data.player_info})},a.playerDetails=function(b){g.open({animation:!0,templateUrl:"views/player/details.html",controller:"PlayerDetailsCtrl",size:"lg",resolve:{currentWeek:function(){return a.currentWeek},api:function(){return a.api},player:function(){return b}}})},a.getStats=function(b){a.currentWeek&&e.get(a.api+"/players/stats",{params:{week:a.currentWeek}}).then(function(c){a.stats=c.data.stats,"function"==typeof b&&b()})},a.logout=function(){d.remove("uid"),d.remove("username"),a.uid=!1,a.username=!1,a.redirect("/")}}]),angular.module("myFantasyTeamApp").controller("PlayersCtrl",["$scope","$http","$routeParams",function(a,b,c){a.setTeamId(c.teamID),a.action=c.action,a.selectedPosition="",a.searchPlayer="",b.get(a.api+"/players/game").then(function(b){a.setWeek(b.data.week),a.getStats()}),a.select=function(b){a.redirect("/teams/players/"+a.team_id+"/add/"+b.id)},a.updatePosition=function(b){a.selectedPosition=b},a.getRanks=function(){b.get(a.api+"/players/rank",{params:{pos:a.position}}).then(function(b){a.playerRanks=b.data.ranks,a.getPlayers()})},a.getPlayers=function(){b.get(a.api+"/players/list",{params:{pos:a.position,team_id:c.teamID}}).then(function(b){a.players=b.data.players})},a.$watch("currentWeek",a.getStats),a.$watch("position",function(){a.getRanks(a.getPlayers)})}]),angular.module("myFantasyTeamApp").controller("RegisterCtrl",["$scope","$http",function(a,b){a.loading=!1,a.createNewAccount=function(){a.loading=!0,a.error=!1,a.user&&a.password||(a.error="All fields required"),a.password!==a.cpassword&&(a.error="Passwords do not match"),a.error||(a.submitted=!0,b.post(a.api+"/user/register",{signup:!0,user:a.user,password:a.password}).then(function(b){var c=b.data;c.complete&&c.uid&&(a.setUser(c),a.redirect("/welcome/")),c.error&&(a.error=c.message,a.loading=!1)}))}}]),angular.module("myFantasyTeamApp").controller("LoginCtrl",["$scope","$http",function(a,b){a.doLogin=function(){return a.error=!1,a.loading=!0,a.user&&a.password||(a.error="Both fields required"),a.error?void(a.loading=!1):void b.post(a.api+"/user/login",{user:a.user,password:a.password}).then(function(b){var c=b.data;c.loggedin===!0&&a.setUser(c),c.error&&(a.error=c.error,a.loading=!1)})}}]),angular.module("myFantasyTeamApp").controller("TeamsCtrl",["$scope","$http","$routeParams",function(a,b,c){function d(){b.get(a.api+"/teams/list",{params:{user_id:a.uid}}).then(function(b){a.my_teams=b.data.my_teams,0===a.my_teams.length&&a.redirect("/teams/create")})}a.showTeams(),a.setTeam(!1),"success"===c.action&&(a.success="Success!"),d()}]),angular.module("myFantasyTeamApp").controller("CreateteamCtrl",["$scope","$http",function(a,b){a.hideTeams(),a.createTeam=function(){b.post(a.api+"/teams/create",{user_id:a.uid,name:a.name}).then(function(b){var c=b.data;c.created===!0&&a.redirect("/practice/draft/"+c.team_id)})}}]),angular.module("myFantasyTeamApp").controller("EditteamCtrl",["$scope","$http","$routeParams",function(a,b,c){function d(b){return a.stats&&a.stats[b.id]?parseFloat(a.stats[b.id].week_points):0}function e(){var b=0;b+=d(a.my_players.QB),b+=d(a.my_players.RB1),b+=d(a.my_players.RB2),b+=d(a.my_players.WR1),b+=d(a.my_players.WR2),b+=d(a.my_players.TE),b+=d(a.my_players.WR3),b+=d(a.my_players.K),b+=d(a.my_players.DEF),a.points=parseFloat(b).round(2)}function f(){b.get(a.api+"/players/game",{params:{week:a.currentWeek}}).then(function(b){var c=b.data;a.currentWeek||a.setWeek(c.week),a.gameWeek=c.gameWeek,a.teamsPlayed=c.teamsPlayed,g()})}function g(){b.get(a.api+"/teams/my_team",{params:{user_id:a.uid,my_team_id:a.team_id,week:a.currentWeek}}).then(function(b){a.setTeam(b.data.team),a.my_players=b.data.my_players,e(),0===a.my_team.length&&a.redirect("/teams/"),a.my_players.length<10&&a.redirect("/draft/"+a.team_id)})}a.showTeams(),a.teamID=c.id,a.setTeamId(a.teamID),a.rosterUrl="#/roster",Number.prototype.round=function(a){return a=a||10,Number(parseFloat(this.toFixed(a)))},a.getLogos(),a.$watch("currentWeek",function(){a.points=0,a.getStats(f),a.getInfo()})}]),angular.module("myFantasyTeamApp").controller("DraftCtrl",["$scope","$http","$routeParams","$filter","$interval",function(a,b,c,d,e){a.teamID=c.teamID,a.challengeID=c.challengeID,a.draftWeek=c.week;var f=14,g=!1,h=1,i=0;a.round=1,a.draftURL="views/roster.html",a.roster=[],a.ready=!1;var j={},k="name",l=this;a.players=[],a.sortingOrder=k,a.reverse=!1,a.filteredItems=[],a.groupedItems=[],a.itemsPerPage=15,a.pagedItems=[],a.currentPage=0;var m=function(a,b){return b&&a.name?-1!==a.name.toString().toLowerCase().indexOf(b.toLowerCase()):!0};a.search=function(){a.filteredItems=d("filter")(a.ranks,function(b){for(var c in b)if(m(b.player,a.searchPlayer))return!0;return!1}),a.currentPage=0,a.groupToPages()},a.groupToPages=function(){a.pagedItems=[];for(var b=0;b<a.filteredItems.length;b++)b%a.itemsPerPage===0?a.pagedItems[Math.floor(b/a.itemsPerPage)]=[a.filteredItems[b]]:a.pagedItems[Math.floor(b/a.itemsPerPage)].push(a.filteredItems[b])},a.range=function(a,b){var c=[];b||(b=a,a=0);for(var d=a;b>d;d++)c.push(d);return c},a.prevPage=function(){a.currentPage>0&&a.currentPage--},a.nextPage=function(){a.currentPage<a.pagedItems.length-1&&a.currentPage++},a.setPage=function(){a.currentPage=this.n},a.select=function(b){var c=!1;if(!a.challengeID||a.draft_order[a.round]===a.uid){switch(b.pos){case"QB":j.QB||c||(j.QB=b,b.my_pos="QB",c=!0);break;case"RB":j.RB1||c||(j.RB1=b,b.my_pos="RB1",c=!0),j.RB2||c||(j.RB2=b,b.my_pos="RB2",c=!0),j.WR3||c||(j.WR3=b,b.my_pos="WR3",c=!0);break;case"WR":j.WR1||c||(j.WR1=b,b.my_pos="WR1",c=!0),j.WR2||c||(j.WR2=b,b.my_pos="WR2",c=!0),j.WR3||c||(j.WR3=b,b.my_pos="WR3",c=!0);break;case"TE":j.TE||c||(j.TE=b,b.my_pos="TE",c=!0);break;case"K":j.K||c||(j.K=b,b.my_pos="K",c=!0);break;case"DEF":j.DEF||c||(j.DEF=b,b.my_pos="DEF",c=!0)}j.BN1||c||(j.BN1=b,b.my_pos="BN1",c=!0),j.BN2||c||(j.BN2=b,b.my_pos="BN2",c=!0),j.BN3||c||(j.BN3=b,b.my_pos="BN3",c=!0),j.BN4||c||(j.BN4=b,b.my_pos="BN4",c=!0),j.BN5||c||(j.BN5=b,b.my_pos="BN5",c=!0),c===!0&&(i+=1,a.roster.push(b.name),a.searchPlayer&&(a.searchPlayer="",a.search()),a.save(b))}},a.loadPlayers=function(){j=a.my_players},a.setPosition=function(b){a.position=b},a.save=function(c){var d="/practice/draft";a.challengeID&&(d="/challenges/draft"),c&&b.post(a.api+d,{challengeID:a.challengeID,user_id:a.uid,playerID:c.id,round:a.round,pos:c.pos,my_pos:c.my_pos,team_id:a.teamID,week:a.draftWeek}).then(function(b){b.data.added&&(a.round+=1,a.draftURL="views/roster.html?round="+a.round,a.my_players=j),l.checkCompleted()})},l.checkCompleted=function(){i*h>=f*h&&(a.challengeID?b.post(a.api+"/challenges/draft",{challengeID:a.challengeID,gametime:1}).then(function(b){b.data.game_ready&&(g&&(e.cancel(g),g=!1),a.redirect("/game/"+a.challengeID))}):b.post(a.api+"/practice/draft",{user_id:a.uid,week:a.currentWeek,gametime:1}).then(function(b){b.data.game_ready&&a.redirect("/practice/")}))},l.getRanks=function(){b.get(a.api+"/players/rank").then(function(b){var c=b.data.ranks;a.ranks=[];for(var d=0;d<c.length;d++)for(var e=c[d].player_id,f=c[d].rank,g=0;g<a.players.length;g++)if(e===a.players[g].id){var h={rank:f,player:a.players[g]};a.ranks.push(h);break}a.search()})},l.getChallengeDetails=function(){h=2,b.get(a.api+"/challenges/vs",{params:{draft_id:a.challengeID,user_id:a.uid}}).then(function(b){a.teamID=b.data.team_id,a.round=parseInt(b.data.round),a.draft_order=b.data.draft_order,i=b.data.totalPlayers,l.getChallengePlayers()})},l.getChallengePlayers=function(){a.hideTeams(),a.setTeam(!1),b.get(a.api+"/challenges/players",{params:{challengeID:a.challengeID,user_id:a.uid}}).then(function(b){a.unavailablePlayers=b.data.players,b.data.my_players&&(j=b.data.my_players),i=b.data.totalPlayers,a.my_players=j,l.getPlayerList()})},l.getSinglePlayerDetails=function(){b.get(a.api+"/practice/draft",{params:{team_id:a.teamID,user_id:a.uid,week:a.currentWeek}}).then(function(b){b.data.my_team;i=b.data.totalPlayers,a.round=parseInt(b.data.round),a.unavailablePlayers=b.data.players,b.data.my_players&&(j=b.data.my_players),a.my_players=j,l.getPlayerList()})},l.getPlayerList=function(){b.get(a.api+"/players/list",{params:{pos:a.position}}).then(function(b){if(a.players=b.data.players,a.unavailablePlayers){var c=[];$.each(a.players,function(b,d){a.unavailablePlayers.indexOf(d.id)<0&&c.push(d)}),a.players=c}l.getRanks(),l.checkCompleted()})},l.get=function(){return a.currentWeek?void(a.challengeID?l.getChallengeDetails():l.getSinglePlayerDetails()):(a.getCurrentWeek(),!1)},a.getLogos(),a.getCurrentWeek(l.get),a.$watch("position",l.get)}]),angular.module("myFantasyTeamApp").filter("startFrom",function(){return function(a,b){return a?(b=+b,a.slice(b)):void 0}}),angular.module("myFantasyTeamApp").controller("TeamsettingsCtrl",["$scope","$routeParams","$http",function(a,b,c){function d(){a.team_id>0&&c.get(a.api+"/teams/list",{params:{user_id:a.uid,my_team_id:a.team_id}}).then(function(b){a.new_team_name=b.data.team.name,a.setTeam(b.data.team)})}a.setTeamId(b.id),a.save=function(){c.post(a.api+"/teams/update",{my_team_id:a.team_id,user_id:a.uid,team_name:a.new_team_name}).then(function(b){a.redirect("teams/success")})},a.$watch("team_id",d)}]),angular.module("myFantasyTeamApp").controller("FriendsCtrl",["$scope","$http","$routeParams",function(a,b,c){var d=function(){b.get(a.api+"/user/friends",{params:{user_id:a.uid}}).then(function(b){var c=b.data;a.friendList=c.friendList,a.friendSentRequest=c.friendSentRequest,a.friendReceiveRequest=c.friendReceiveRequest,a.friends=c.friends})};d()}]),angular.module("myFantasyTeamApp").controller("GameCtrl",["$scope","$http","$routeParams",function(a,b,c){a.gameID=c.id,a.rosterUrl="#/game/"+a.gameID+"/roster";var d=function(){a.your_points=0,a.their_points=0,a.your_points+=a.points(a.my_players.QB),a.your_points+=a.points(a.my_players.RB1),a.your_points+=a.points(a.my_players.RB2),a.your_points+=a.points(a.my_players.WR1),a.your_points+=a.points(a.my_players.WR2),a.your_points+=a.points(a.my_players.TE),a.your_points+=a.points(a.my_players.WR3),a.your_points+=a.points(a.my_players.K),a.your_points+=a.points(a.my_players.DEF),a.your_points=parseFloat(a.your_points).round(2),a.their_points+=a.points(a.their_players.QB),a.their_points+=a.points(a.their_players.RB1),a.their_points+=a.points(a.their_players.RB2),a.their_points+=a.points(a.their_players.WR1),a.their_points+=a.points(a.their_players.WR2),a.their_points+=a.points(a.their_players.TE),a.their_points+=a.points(a.their_players.WR3),a.their_points+=a.points(a.their_players.K),a.their_points+=a.points(a.their_players.DEF),a.their_points=parseFloat(a.their_points).round(2)},e=function(){b.get(a.api+"/challenges/details",{params:{challenge_id:a.gameID}}).then(function(b){var c=b.data.details;a.gameWeek=c.week;var d=c.game;"0"===d&&a.redirect("/draft/"+a.gameID)})},f=function(c){return a.currentWeek?void b.get(a.api+"/players/game",{params:{week:a.currentWeek}}).then(function(b){var c=b.data;a.setWeek(c.week),a.getStats(g),a.teamsPlayed=c.teamsPlayed,e()}):void a.getCurrentWeek()},g=function(){b.get(a.api+"/game/players",{params:{user_id:a.uid,challenge_id:c.id}}).then(function(b){a.my_players=b.data.my_players,a.their_players=b.data.their_players,a.team_id=b.data.team_id,a.opponent=b.data.opponent,d()})};a.getLogos(),a.$watch("currentWeek",f)}]),angular.module("myFantasyTeamApp").controller("HomeCtrl",function(){}),angular.module("myFantasyTeamApp").controller("RosterchangeCtrl",["$scope","$routeParams","$http",function(a,b,c){function d(){c.get(a.api+"/players/details",{params:{player:b.playerID}}).then(function(b){var c=b.data;a.player=c.player_info})}function e(){c.get(a.api+"/game/roster",{params:{playerID:b.playerID,teamID:b.teamID,user_id:a.uid,practice:g,week:a.currentWeek}}).then(function(b){var c=b.data,d=c.roster;h=c.gameID,a.currentRoster=[],a.availableRoster=[];for(var e=0;e<d.length;e++)a.playerID===d[e].id?a.currentRoster.push(d[e]):a.availableRoster.push(d[e]);a.getLogos()})}function f(){c.get(a.api+"/players/game").then(function(b){var c=b.data;a.gameWeek=c.week,a.teamsPlayed=c.teamsPlayed,d(),e()})}a.playerID=b.playerID;var g=!0,h=0;b.gameID?(a.backButton="#/game/"+b.gameID,g=!1):a.backButton="#/teams/edit/"+b.teamID,a.setExistingPlayer=function(b){a.existingPlayer=b},a.updateRoster=function(){c.post(a.api+"/game/roster",{teamID:b.teamID,oldPlayerID:a.playerID,newPlayerID:a.existingPlayer,practice:g}).then(function(b){b.data;a.redirect("/game/"+h)})},a.getCurrentWeek(f)}]),angular.module("myFantasyTeamApp").controller("ChallengeCtrl",["$scope","$http","$routeParams",function(a,b,c){a.submitted=!1,a.challengeMode=1,a.setMode=function(b){a.challengeMode=b},a.challengePlayer=function(){a.submitted=!0,b.post(a.api+"/user/challenge",{challenge_user:c.userID,user_id:a.uid,mode:a.challengeMode,winner:a.winner,loser:a.loser}).then(function(b){a.redirect("/vs/")})},b.get(a.api+"/user/challenge",{params:{challenge_user:c.userID}}).then(function(b){a.opponent=b.data.opponent})}]),angular.module("myFantasyTeamApp").controller("PlayerDetailsCtrl",["$scope","$uibModalInstance","player","$http","api","currentWeek",function(a,b,c,d,e,f){a.player=c,d.get(e+"/players/details",{params:{player:a.player.id,week:f}}).then(function(b){a.stats=b.data.stats,a.info=b.data.info}),a.closePlayerDetails=function(){b.close()}}]),angular.module("myFantasyTeamApp").controller("GameSettingsCtrl",["$scope","$routeParams",function(a,b){var c=b.id;console.debug(c)}]),angular.module("myFantasyTeamApp").controller("PlayerSettingsCtrl",function(){}),angular.module("myFantasyTeamApp").controller("ProfileCtrl",["$scope","$http","$cookies",function(a,b,c){a.newDisplayName=a.displayname,a.update=function(){b.post(a.api+"/user/profile",{update:!0,displayName:a.newDisplayName,user_id:a.uid}).then(function(b){b.data.update===!0&&(a.setUserDisplay(b.data.user),a.redirect("/"))})}}]),angular.module("myFantasyTeamApp").controller("PlayerAddCtrl",["$scope","$routeParams","$http",function(a,b,c){function d(){c.get(a.api+"/teams/my_team",{params:{user_id:a.uid,my_team_id:b.teamID}}).then(function(b){a.setTeam(b.data.team),a.my_players=b.data.my_players,a.my_roster=b.data.roster})}function e(){c.get(a.api+"/players/details",{params:{player:b.playerID}}).then(function(b){console.debug(b.data);var c=b.data;a.selectedPlayer=c.player_info})}a.setExistingPlayer=function(b){a.existingPlayer=b},a.update=function(){c.post(a.api+"/players/update",{update:!0,existing_player_id:a.existingPlayer,new_player_id:a.selectedPlayer.id,user_id:a.uid,team_id:a.team_id}).then(function(b){var c=b.data;c.complete===!0&&a.redirect("/teams/edit/"+a.team_id)})},a.cancel=function(){a.redirect("/teams/players/"+a.team_id)},a.getLogos(),d(),e()}]),angular.module("myFantasyTeamApp").controller("FriendRequestsCtrl",["$scope","$http",function(a,b){a.getFriends(),a.confirmFriend=function(c){b.post(a.api+"/user/friends",{confirm:!0,user_id:a.uid,friend_id:c}).then(function(b){if(b.data.added===!0){var d=a.friendReceiveRequest.indexOf(c);a.friendReceiveRequest.splice(d,1),a.friendList.push(c),a.friends=b.data.friends}})}}]),angular.module("myFantasyTeamApp").controller("UsersCtrl",["$scope","$http",function(a,b){a.challenges=[],a.searchUser="",a.isSearching=!1,a.searchResults=[],a.usersCache=[],a.userList=[],a.deepSearch=function(){a.searchUser.length>0&&(a.isSearching=!0,b.post(a.api+"/user/list",{user:a.searchUser}).then(function(b){var c=b.data;a.isSearching=!1,c.users.length>0&&(a.searchResults=c.users,a.userList=a.searchResults)}))},a.clearSearch=function(){a.searchResults=[],a.searchUser="",a.userList=a.usersCache};var c=function(){return a.currentWeek?void b.get(a.api+"/challenges/list",{params:{user_id:a.uid,week:a.currentWeek}}).then(function(b){a.users=b.data.users,a.friends=b.data.friends,a.challengesList=b.data.challengesList,d()}):void a.getCurrentWeek()},d=function(){b.get(a.api+"/user/list",{params:{user_id:a.uid}}).then(function(b){var c=b.data;a.userList=c.users,a.usersCache=a.userList})};a.addFriend=function(c){b.post(a.api+"/user/friends",{user_id:a.uid,friend_id:c}).then(function(b){b.data.request===!0&&a.friendSentRequest.push(c)})},a.challengePlayer=function(c){b.post(a.api+"/user/challenge",{challenge_user:c,user_id:a.uid,week:a.currentWeek}).then(function(b){a.users.sentList.push(c)})},a.$watch("currentWeek",c)}]),angular.module("myFantasyTeamApp").controller("ChallengesCtrl",["$scope","$http",function(a,b){a.acceptChallenge=function(c){b.post(a.api+"/challenges/accept",{challenge_id:c,user_id:a.uid}).then(function(b){var d=b.data;d.accepted>0&&a.redirect("/draft/"+c+"/")})},a.rejectChallenge=function(c){b.post(a.api+"/challenges/reject",{challenge_id:c}).then(function(b){if(b.data.rejected>0)for(var d=0;d<a.challenges.length;d++)if(a.challenges[d].id===c){a.challenges.splice(d,1);break}})};var c=function(c){return a.currentWeek?void b.get(a.api+"/challenges/list",{params:{user_id:a.uid,week:a.currentWeek}}).then(function(b){var c=b.data;a.users=c.users,a.friends=c.friends}):void a.getCurrentWeek()};a.$watch("currentWeek",c)}]),angular.module("myFantasyTeamApp").controller("PracticeCtrl",["$scope","$http",function(a,b){a.getLogos();var c=function(){a.my_players&&(a.your_points=0,a.your_points+=a.points(a.my_players.QB),a.your_points+=a.points(a.my_players.RB1),a.your_points+=a.points(a.my_players.RB2),a.your_points+=a.points(a.my_players.WR1),a.your_points+=a.points(a.my_players.WR2),a.your_points+=a.points(a.my_players.TE),a.your_points+=a.points(a.my_players.WR3),a.your_points+=a.points(a.my_players.K),a.your_points+=a.points(a.my_players.DEF),a.your_points=parseFloat(a.your_points).round(2))},d=function(){return a.currentWeek?(a.your_points=null,a.getInfo(),void b.get(a.api+"/practice/week",{params:{user_id:a.uid,week:a.currentWeek}}).then(function(b){a.gameWeek=b.data.week,a.game=b.data.game,a.my_players=b.data.my_players,a.teamsPlayed=b.data.teamsPlayed,a.getStats(c)})):void a.getCurrentWeek()};a.$watch("currentWeek",d)}]),angular.module("myFantasyTeamApp").run(["$templateCache",function(a){a.put("views/challenge.html",'<form ng-submit="challengePlayer()"> <div class="form-group"> <h2>You are challenging {{opponent}}</h2> <!--\n		<label>Type of challenge</label>\n\n		<div class="btn-group btn-group-justified" role="group">\n			<a ng-click="setMode(1)" ng-class="{\'active btn-primary\': challengeMode === 1}" class="btn btn-default">Week</a>\n			<a ng-click="setMode(2)" ng-class="{\'active btn-primary\': challengeMode === 2}" class="btn btn-default">Season</a>\n		</div> --> </div> <div class="form-group"> <label>Winner gets/does <i>(optional)</i>:</label> <textarea class="form-control" rows="3" ng-model="winner"></textarea> </div> <div class="form-group"> <label>Loser gets/does <i>(optional)</i>:</label> <textarea class="form-control" rows="3" ng-model="loser"></textarea> </div> <div class="form-group"> <input type="submit" value="Send Challenge" class="btn btn-primary" ng-disabled="submitted"> <a ng-href="#/vs/" class="btn btn-link">Cancel</a> </div> </form>'),a.put("views/challenges.html",'<div class="row"> <div class="col-sm-12"> <ng-include src="\'views/weeks.html\'"></ng-include> </div> <div class="col-sm-4"> <h2>Friend Challenges</h2> <ul class="list-group"> <li class="list-group-item" ng-show="friends.challenges.length === 0" ng-cloak> No friend challenges </li> <li class="list-group-item" ng-repeat="friend in friends.challenges"> <div class="row"> <div class="col-sm-6"> <div class="name">{{friend.name}}</div> </div> <div class="col-sm-6 text-right"> <a ng-href="#/challenge/{{friend.id}}" ng-if="friends.draftList.indexOf(friend.id) < 0 && friends.gameList.indexOf(friend.id) < 0 && friends.sentList.indexOf(friend.id) < 0 && friends.receivedList.indexOf(friend.id) < 0" class="btn btn-block btn-primary">Challenge</a> <span ng-show="friends.sentList.indexOf(friend.id) >= 0 && friends.receivedList.indexOf(friend.id) < 0">Pending response</span> <a ng-href="#/draft/{{friend.challenge_id}}" ng-if="friends.draftList.indexOf(friend.id) >= 0" class="btn btn-primary">Enter Draft</a> <a ng-if="friends.draftList.indexOf(friend.id) < 0 && friends.gameList.indexOf(friend.id) >= 0" ng-href="#/game/{{friend.challenge_id}}" class="btn btn-success">Game Center</a> </div> </div> </li> </ul> </div> <div class="col-sm-4"> <h2>Player Challenges</h2> <ul class="list-group"> <li class="list-group-item" ng-show="users.challenges.length === 0" ng-cloak> No player challenges </li> <li class="list-group-item" ng-repeat="user in users.challenges"> <div class="row"> <div class="col-sm-6"> <div class="name">{{user.name}}</div> </div> <div class="col-sm-6 text-right"> <a ng-href="#/draft/{{user.challenge_id}}" ng-if="users.draftList.indexOf(user.id) >= 0" class="btn btn-primary">Enter Draft</a> <a ng-if="users.draftList.indexOf(user.id) < 0 && users.gameList.indexOf(user.id) >= 0" ng-href="#/game/{{user.challenge_id}}" class="btn btn-success">Game Center</a> </div> </div> </li> </ul> </div> <div class="col-sm-4"> <h2>Challenge Requests</h2> <ul class="list-group"> <li class="list-group-item" ng-show="users.received.length === 0 && friends.received.length === 0" ng-cloak> No challenge requests </li> <!-- Friends --> <li class="list-group-item" ng-repeat="friend in friends.received"> <div class="row"> <div class="col-sm-12 text-center"> <div class="name"><b>Friend:</b> {{friend.name}}</div> </div> <div class="col-sm-12 text-center"> <a ng-click="acceptChallenge(friend.challenge_id)" class="btn btn-primary">Accept</a> <a ng-click="rejectChallenge(friend.challenge_id)" class="btn btn-danger">Decline</a> </div> </div> </li> <!-- Users --> <li class="list-group-item" ng-repeat="user in users.received"> <div class="row"> <div class="col-sm-4"> <div class="name">{{user.name}}</div> </div> <div class="col-sm-8 text-right buttons"> <a ng-click="acceptChallenge(user.challenge_id)" class="btn btn-primary">Accept</a> <a ng-click="rejectChallenge(user.challenge_id)" class="btn btn-danger">Decline</a> </div> </div> </li>  </ul></div> </div>'),a.put("views/draft.html",'<ng-include src="\'views/teams/header.html\'"></ng-include> <div class="row"> <div class="col-sm-12" ng-if="challengeID" ng-cloak> <h2 class="text-center">Head to Head Draft</h2> </div> <div class="col-sm-12" ng-if="draft_order"> <h3 class="text-center" ng-show="draft_order[round] === uid" ng-cloak>Select a player below</h3> <div class="alert alert-info text-center" ng-show="draft_order[round] !== uid" ng-cloak>Please wait for your turn in the next round.</div> </div> <div class="col-sm-7"> <h3>Round {{round}}</h3> <div class="row"> <div class="col-sm-12"> <input type="text" class="form-control" ng-change="search()" ng-model="searchPlayer" placeholder="Search for Player"> </div> <div class="col-sm-12"> <div class="btn-group btn-group-justified" role="group"> <a href ng-click="setPosition(option)" ng-repeat="option in options" ng-class="{\'active\': option == position}" class="btn btn-default">{{option}}</a> </div> </div> </div> <ul class="pager"> <li class="previous" ng-class="{disabled: currentPage == 0}"> <a href ng-click="prevPage()">« Prev</a> </li> <li class="next" ng-class="{disabled: currentPage == pagedItems.length - 1}"> <a href ng-click="nextPage()">Next »</a> </li> </ul> <table class="table table-striped table-hover"> <tbody> <tr ng-repeat="rank in pagedItems[currentPage] | orderBy:sortingOrder:reverse | filter: searchPlayer" ng-include src="\'views/player-row.html\'" ng-init="player = rank.player;position = rank.player.pos;add = true;selected = false;showplayerimage = false;showteam = true;showpos = true;" ng-show="roster.indexOf(rank.player.name) < 0" class="player-row"></tr> </tbody> </table> <ul class="pager"> <li class="previous" ng-class="{disabled: currentPage == 0}"> <a href ng-click="prevPage()">« Prev</a> </li> <li class="next" ng-class="{disabled: currentPage == pagedItems.length - 1}"> <a href ng-click="nextPage()">Next »</a> </li> </ul> </div> <div class="col-sm-5"> <h3>Player Roster</h3> <ng-include src="draftURL" onload="roster = my_players;showpos = true;showteam = true;showplayerimage = false" ng-if="my_players"></ng-include> </div> </div>'),a.put("views/friend-requests.html",'<h2>Friend Requests</h2> <ul class="list-group"> <li class="list-group-item" ng-repeat="friend in friends" ng-hide="friend.id === uid || friendReceiveRequest.indexOf(friend.id) < 0 || friendList.indexOf(friend.id) >= 0" ng-cloak> <div class="row"> <div class="col-sm-6"> <div class="name">{{friend.name}}</div> </div> <div class="col-sm-6 text-right buttons"> <a ng-click="confirmFriend(friend.id)" ng-show="friendReceiveRequest.indexOf(friend.id) >= 0" class="btn btn-success">Confirm Friend</a> </div> </div> </li> </ul>'),a.put("views/friends.html",'<div class="row"> <div class="col-sm-12" ng-show="message" ng-cloak> <div class="bg-success text-center"><p>{{message}}</p></div> </div> <div class="col-sm-12" ng-show="friendReceiveRequest.length > 0" ng-cloak> <div class="bg-success text-center"><a ng-href="#/friends/requests/">You have pending friend requests</a></div> </div> <div class="col-sm-12"> <h2>Friends</h2> <ul class="list-group"> <li class="list-group-item" ng-show="friends.length === 0" ng-cloak> No friends </li> <li class="list-group-item" ng-repeat="friend in friends"> <div class="row"> <div class="col-sm-6"> <div class="name">{{friend.username}}</div> </div> <div class="col-sm-6 text-right buttons"> <a class="btn btn-danger">Unfriend</a> </div> </div> </li> </ul> </div> </div>'),a.put("views/friends/requests.html",'<h2>Requests</h2> <ul class="list-group"> <li class="list-group-item" ng-show="friendReceiveRequest.length === 0"> No friend requests </li> <li class="list-group-item users" ng-repeat="friend in friendReceiveRequest"> <div class="row"> <div class="col-sm-6"> <div class="name">{{friend.username}}</div> </div> <div class="col-sm-6"> <div class="buttons"> <a ng-click="confirmFriend(friend.id)" class="btn btn-success">Confirm Request</a> </div> </div> </div> </li> </ul>'),a.put("views/game.html",'<div class="row"> <div class="col-sm-6"> <h2 class="h2">Game Center</h2> </div> <div class="col-sm-6 text-right"> <!-- <a ng-href="#/game/{{gameID}}/settings" class="btn btn-default">Settings</a> --> </div> <div class="col-sm-12" ng-show="message" ng-cloak> <div class="alert alert-info text-center">{{message}}</div> </div> </div> <div class="row"> <div class="col-sm-6"> <div class="row"> <div class="col-sm-6"> <h3>{{username}}</h3> </div> <div class="col-sm-6 text-right"> <h3>{{your_points}}</h3> </div> </div> <ng-include src="\'views/roster.html\'" ng-init="showteam = true;roster = my_players;changeRoster = true;showpos = true;showpoints = true;" ng-if="my_players"></ng-include> </div> <div class="col-sm-6"> <div class="row"> <div class="col-sm-6"> <h3>{{opponent}}</h3> </div> <div class="col-sm-6 text-right"> <h3>{{their_points}}</h3> </div> </div> <ng-include src="\'views/roster.html\'" ng-init="showteam = true;roster = their_players;showpos = true;showpoints = true" ng-if="their_players"></ng-include> </div> </div>'),a.put("views/gamesettings.html",'<div class="row"> <div class="col-sm-12"> <h2 class="h2">Game Settings</h2> </div> <div class="col-sm-12" ng-show="message" ng-cloak> <div class="alert alert-info text-center">{{message}}</div> </div> </div>'),a.put("views/header.html",'<div class="header"> <div class="navbar navbar-default" role="navigation"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">My Fantasy Team</a> </div> <div class="collapse navbar-collapse" id="js-navbar-collapse"> <ul class="nav navbar-nav" ng-show="uid" ng-cloak> <li><a href="#/">Home</a></li> <li><a ng-href="#/practice">Practice</a></li> <li><a ng-href="#/challenges">My Challenges</a></li> <li><a ng-href="#/friends">Friends</a></li> <li><a ng-href="#/users">Users</a></li> </ul> <ul class="nav navbar-nav navbar-right" ng-show="uid" ng-cloak> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">{{displayname}} <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a ng-href="#/profile">Profile</a></li> <li role="separator" class="divider"></li> <li><a ng-href="#/" ng-click="logout()">Logout</a></li> </ul> </li> </ul> </div> </div> </div> </div>'),
a.put("views/home.html",'<div class="row intro" ng-hide="uid" ng-cloak> <div class="col-sm-6"> <h1>Fantasy Zone</h1> <h2>Battle weekly for pride</h2> <h3>Play and practice for free</h3> <!-- <a class="btn btn-block btn-primary" ng-href="#/login">Login</a> --> </div> <div class="col-sm-6"> <div ng-controller="LoginCtrl"> <ng-include src="\'views/login.html\'"></ng-include> </div> </div> </div> <div ng-show="uid" ng-cloak> <div class="col-sm-12 bg-success" ng-if="currentLocation === \'welcome\'"> <p>Welcome {{username}}!</p> </div> <div class="col-sm-6"> <h1>Player News</h1> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid nihil eveniet dolores pariatur quas. Aperiam ullam dicta dolore expedita, repudiandae rerum sint, quibusdam omnis iure doloribus adipisci ab quo necessitatibus?</p> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid nihil eveniet dolores pariatur quas. Aperiam ullam dicta dolore expedita, repudiandae rerum sint, quibusdam omnis iure doloribus adipisci ab quo necessitatibus?</p> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid nihil eveniet dolores pariatur quas. Aperiam ullam dicta dolore expedita, repudiandae rerum sint, quibusdam omnis iure doloribus adipisci ab quo necessitatibus?</p> </div> <div class="col-sm-6"> <h2>Top players this week</h2> <table> <tr> <td>1.</td> <td>Tom Brady</td> <td>30.0</td> </tr> </table> </div> </div>'),a.put("views/login.html",'<h2>Login</h2> <div class="alert bg-danger" ng-cloak ng-show="error">{{error}}</div> <form ng-submit="doLogin()"> <div class="form-group"> <span class="form-label">User: </span> <input name="user" type="text" ng-model="$parent.user" class="form-control"> </div> <div class="form-group"> <span class="form-label">Password: </span> <input name="password" type="password" ng-model="$parent.password" class="form-control"> </div> <div class="row"> <div class="col-sm-6"> <span class="form-label"></span> <input type="submit" class="btn btn-primary" value="Login" ng-disabled="loading"> </div> <div class="col-sm-6 text-right"> <span class="form-label"></span> <a class="btn btn-link" ng-href="#/register">Register</a> </div> </div> </form>'),a.put("views/player-add.html",'<h3>Selected Player</h3> <table> <tr> </tr><tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = selectedPlayer;position = selectedPlayer.pos;selected = false;" ng-if="selectedPlayer"></tr>  </table> <br> <h3>Replace with existing</h3> <table data-ng-show="selectedPlayer" class="table table-striped"> <thead> <tr ng-include src="\'views/player-row-header.html\'" class="player-row-header" ng-init="select = true;showstats = false;rosterchange = true;showpos = true;" ng-if="selectedPlayer"></tr> </thead> <tbody> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.QB;position = \'QB\';rosterchange = true;showpos = true;" ng-if="selectedPlayer.pos === \'QB\'"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.RB1;position = \'RB1\';rosterchange = true;showpos = true;" ng-if="selectedPlayer.pos === \'RB\'"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.RB2;position = \'RB2\';rosterchange = true;showpos = true;" ng-if="selectedPlayer.pos === \'RB\'"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.WR1;position = \'WR1\';rosterchange = true;showpos = true;" ng-if="selectedPlayer.pos === \'WR\'"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.WR2;position = \'WR2\';rosterchange = true;showpos = true;" ng-if="selectedPlayer.pos === \'WR\'"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.TE;position = \'TE\';rosterchange = true;showpos = true;" ng-if="selectedPlayer.pos === \'TE\'"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.WR3;position = \'WR3\';rosterchange = true;showpos = true;" ng-if="selectedPlayer.pos === \'WR\'"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.K;position = \'K\';rosterchange = true;showpos = true;" ng-if="selectedPlayer.pos === \'K\'"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.DEF;position = \'DEF\';rosterchange = true;showpos = true;" ng-if="selectedPlayer.pos === \'DEF\'"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.BN1;position = \'BN1\';rosterchange = true;showpos = true;" ng-if="selectedPlayer"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.BN2;position = \'BN2\';rosterchange = true;showpos = true;" ng-if="selectedPlayer"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.BN3;position = \'BN3\';rosterchange = true;showpos = true;" ng-if="selectedPlayer"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.BN4;position = \'BN4\';rosterchange = true;showpos = true;" ng-if="selectedPlayer"></tr> <tr ng-include src="\'views/player-row.html\'" class="player-row" ng-init="player = my_players.BN5;position = \'BN5\';rosterchange = true;showpos = true;" ng-if="selectedPlayer"></tr> </tbody> </table> <br> <p class="text-center"> <a ng-click="update()" class="btn btn-primary">Confirm Replace</a> <a ng-click="cancel()" class="btn btn-link">Cancel</a> </p>'),a.put("views/player-row-header.html",'<td class="add" ng-if="add == true && selected == false"></td> <td class="sort" ng-if="rosterchange == true"></td> <td class="pos" ng-if="showpos == true">POS</td> <td class="select" ng-if="changeRoster == true">Move</td> <td class="player"></td> <td class="opp" ng-if="showinfo">Opp</td> <td class="pass-yds" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">Passing Yds</td> <td class="pass-td" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">Passing TD</td> <td class="pass-int" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">Passing INT</td> <td class="rush-yds" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">Rushing Yds</td> <td class="rush-td" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">Rushing TD</td> <td class="pat-made" ng-if="showstats == true && player.pos == \'K\'">PAT Made</td> <td class="kick-yds" ng-if="showstats == true && player.pos == \'K\'">0-19</td> <td class="kick-yds" ng-if="showstats == true && player.pos == \'K\'">20-29</td> <td class="kick-yds" ng-if="showstats == true && player.pos == \'K\'">30-39</td> <td class="kick-yds" ng-if="showstats == true && player.pos == \'K\'">40-49</td> <td class="kick-yds" ng-if="showstats == true && player.pos == \'K\'">50+</td> <td class="sack" ng-if="showstats == true && player.pos == \'DEF\'">Sack</td> <td class="int" ng-if="showstats == true && player.pos == \'DEF\'">INT</td> <td class="fumble" ng-if="showstats == true && player.pos == \'DEF\'">Fumble Rec</td> <td class="safety" ng-if="showstats == true && player.pos == \'DEF\'">Safety</td> <td class="td" ng-if="showstats == true && player.pos == \'DEF\'">TD</td> <td class="td-ret" ng-if="showstats == true && player.pos == \'DEF\'">TD Ret</td> <td class="pts-allowed" ng-if="showstats == true && player.pos == \'DEF\'">Pts Allowed</td> <td class="week-points" ng-if="showpoints">Points</td>'),a.put("views/player-row.html",'<td class="sort" ng-if="organize == true"><span class="handle">::</span></td> <td class="add" ng-if="add == true && selected == false"><a ng-click="select(player)" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></a></td> <td class="position" ng-if="rosterchange == true"><input type="radio" ng-model="existingPlayer" name="change" ng-change="setExistingPlayer(player.id)" value="{{player.id}}" ng-disabled="rosterdisabled" ng-show="teamsPlayed.indexOf(player.team_id) < 0 && gameWeek >= currentWeek"></td> <td class="position" ng-if="showpos == true">{{my_position || position}}</td> <td class="select" ng-if="changeRoster == true"><a name="selectedPosition" ng-href="{{rosterUrl}}/{{team_id}}/{{player.id}}" class="btn btn-primary btn-xs" ng-show="teamsPlayed.indexOf(player.team_id) < 0 && gameWeek >= currentWeek" ng-cloak><span class="glyphicon glyphicon-menu-hamburger"></span></a></td> <td class="player"> <span class="team"><img ng-src="images/teams/{{logos[player.team_id]}}.png" ng-if="player"><img ng-src="images/team.png" ng-if="!player"></span> <span class="player-image" ng-if="showplayerimage"> <span class="image"><img ng-src="images/players/{{player.id}}.png" err-src="images/player.png"></span> </span> <a ng-click="playerDetails(player)" class="name">{{player.name || \'(empty)\'}}</a> </td> <td ng-if="showinfo" class="opp">{{info[player.id].opponent || \'N/A\'}}</td> <td class="pass-yds" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">{{stats[player.id].stats[5] || "-"}}</td> <td class="pass-td" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">{{stats[player.id].stats[6] || "-"}}</td> <td class="pass-int" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">{{stats[player.id].stats[7] || "-"}}</td> <td class="rush-yds" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">{{stats[player.id].stats[14] || "-"}}</td> <td class="rush-td" ng-if="showstats == true && player.pos != \'K\' && player.pos != \'DEF\'">{{stats[player.id].stats[15] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'K\'">{{stats[player.id].stats[33] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'K\'">{{stats[player.id].stats[35] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'K\'">{{stats[player.id].stats[36] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'K\'">{{stats[player.id].stats[37] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'K\'">{{stats[player.id].stats[38] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'K\'">{{stats[player.id].stats[39] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[45] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[46] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[47] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[49] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[50] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[53] || "-"}}</td> <td class="text-center" ng-if="showstats == true && player.pos == \'DEF\'">{{stats[player.id].stats[54] || "-"}}</td> <td class="week-points" ng-if="showpoints">{{stats[player.id].week_points || "0.00"}}</td>'),a.put("views/player/details.html",'<div class="modal-header player-modal-head"> <span class="image"><img ng-src="images/players/{{player.id}}.png" err-src="images/player.png"></span> <h3 class="modal-title">{{player.name}}</h3> </div> <div class="modal-body player-modal-body"> <div class="row"> <div class="col-sm-8"> <span class="overview"> <table class="table table-striped table-bordered table-condensed"> <tbody> <tr> <td><h5>Percent Owned</h5></td> <td><h3>{{info.percentOwned}}%</h3></td> </tr> <tr> <td><h5>Percent Changed</h5></td> <td><h3>{{info.percentOwnedChange}}%</h3></td> </tr> <tr> <td><h5>Adds</h5></td> <td><h3>{{info.numAdds}}</h3></td> </tr> <tr> <td><h5>Drops</h5></td> <td><h3>{{info.numDrops}}</h3></td> </tr> </tbody> </table> </span> </div> <div class="col-sm-4"> <span class="stats"> <table class="table table-striped table-bordered table-condensed"> <tbody> <tr class="player-row" ng-repeat="stat in stats"> <td class="week">Week {{stat.week}}</td> <td class="week-points">{{stat.week_points || \'--\'}}</td> </tr> </tbody> </table> </span> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="closePlayerDetails()">Close</button> </div>'),a.put("views/players.html",'<div ng-hide="selectedPlayer"> <div class="row"> <div class="col-sm-6"> <h2>Available Players</h2> </div> <div class="col-sm-4"> <input type="text" ng-model="searchPlayer" class="form-control" placeholder="Search Player"> </div> <div class="col-sm-2 text-right"> <form> <select class="form-control" name="position" ng-model="position" ng-options="option for option in options"></select> </form> </div> </div> <ng-include src="\'views/weeks.html\'"></ng-include> <table class="table table-striped"> <thead> <tr ng-include src="\'views/player-row-header.html\'" class="player-row-header" ng-if="!selectedPlayer" ng-init="add = true;showstats = true;selected = false;showpoints = true;"></tr> </thead> <tbody> <tr ng-repeat="player in players" ng-include src="\'views/player-row.html\'" class="player-row" ng-init="position = player.pos;add = true;selected = false;showstats = true;showpoints = true;"></tr> </tbody> </table></div>'),a.put("views/practice.html",'<div class="row"> <div class="col-sm-8"> <ng-include src="\'views/weeks.html\'"></ng-include> </div> <div class="col-sm-4 text-right"> <h3>{{your_points}}</h3> </div> <div class="col-sm-12"> <ng-include src="\'views/roster.html\'" ng-init="showteam = true;roster = my_players;changeRoster = true;showpos = true;showpoints = true;" ng-if="game > 0"></ng-include> <div ng-if="game < 1" ng-cloak> <h2>Setup your lineup for this week</h2> <a ng-href="#/practice/draft/{{currentWeek}}" class="btn btn-primary">Enter Draft</a> </div> </div> </div>'),a.put("views/profile.html",'<h2>Settings</h2> <form ng-submit="update()"> <div class="form-group"> <label>Display Name</label> <input type="text" ng-model="newDisplayName" class="form-control"> </div> <input type="submit" value="Update Profile" class="btn btn-primary"> </form>'),a.put("views/register.html",'<h2>Register</h2> <div class="error bg-danger" ng-cloak ng-show="error">{{error}}</div> <form ng-submit="createNewAccount()"> <div class="form-group"> <span class="form-label">User: </span> <input name="user" type="text" ng-model="user" class="form-control"> </div> <div class="form-group"> <span class="form-label">Password: </span> <input name="password" type="password" ng-model="password" class="form-control"> </div> <div class="form-group"> <span class="form-label">Confirm Password: </span> <input name="cpassword" type="password" ng-model="cpassword" class="form-control"> </div> <div class="form-group"> <input type="submit" value="Register" class="btn btn-primary"> </div> </form>'),a.put("views/roster-change.html",'<h1>Roster Change</h1> <form ng-submit="updateRoster()"> <h3>Selected player</h3> <table class="table table-striped table-hover"> <tbody> <tr ng-include src="\'views/player-row.html\'" ng-init="rosterchange = false;rosterdisabled = true;" class="player-row"></tr> </tbody> </table> <h3>Swap with player</h3> <table class="table table-striped table-hover"> <tbody> <tr ng-repeat="r in availableRoster" ng-include src="\'views/player-row.html\'" ng-init="showteam = true;showplayerimage = false;rosterchange = true;player = r;rosterdisabled = false" class="player-row"></tr> </tbody> </table> <input type="submit" value="Submit Roster Change" class="btn btn-primary" ng-disabled="!existingPlayer"> <a ng-href="{{backButton}}" class="btn btn-default">Cancel</a> </form>'),a.put("views/roster.html",'<table class="table table-striped table-hover"> <thead> <tr ng-include="\'views/player-row-header.html\'" class="player-row-header"></tr> </thead> <tbody> <!-- QB --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'QB\'" class="player-row" ng-if="!roster.QB"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.QB;position = \'QB\'" class="player-row" ng-if="roster.QB"></tr> <!-- RB1 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'RB\'" class="player-row" ng-if="!roster.RB1"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.RB1;position = \'RB\'" class="player-row" ng-if="roster.RB1"></tr> <!-- RB2 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'RB\'" class="player-row" ng-if="!roster.RB2"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.RB2;position = \'RB\'" class="player-row" ng-if="roster.RB2"></tr> <!-- WR1 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'WR\'" class="player-row" ng-if="!roster.WR1"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.WR1;position = \'WR\'" class="player-row" ng-if="roster.WR1"></tr> <!-- WR2 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'WR\'" class="player-row" ng-if="!roster.WR2"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.WR2;position = \'WR\'" class="player-row" ng-if="roster.WR2"></tr> <!-- TE --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'TE\'" class="player-row" ng-if="!roster.TE"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.TE;position = \'TE\'" class="player-row" ng-if="roster.TE"></tr> <!-- WR3 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'W/R\'" class="player-row" ng-if="!roster.WR3"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.WR3;position = \'W/R\'" class="player-row" ng-if="roster.WR3"></tr> <!-- K --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'K\'" class="player-row" ng-if="!roster.K"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.K;position = \'K\'" class="player-row" ng-if="roster.K"></tr> <!-- DEF --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'DEF\'" class="player-row" ng-if="!roster.DEF"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.DEF;position = \'DEF\'" class="player-row" ng-if="roster.DEF"></tr> <!-- BN1 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'BN\'" class="player-row" ng-if="!roster.BN1"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.BN1;position = \'BN\'" class="player-row" ng-if="roster.BN1"></tr> <!-- BN2 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'BN\'" class="player-row" ng-if="!roster.BN2"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.BN2;position = \'BN\'" class="player-row" ng-if="roster.BN2"></tr> <!-- BN3 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'BN\'" class="player-row" ng-if="!roster.BN3"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.BN3;position = \'BN\'" class="player-row" ng-if="roster.BN3"></tr> <!-- BN4 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'BN\'" class="player-row" ng-if="!roster.BN4"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.BN4;position = \'BN\'" class="player-row" ng-if="roster.BN4"></tr> <!-- BN5 --> <tr ng-include src="\'views/player-row.html\'" ng-init=" position = \'BN\'" class="player-row" ng-if="!roster.BN5"></tr> <tr ng-include="\'views/player-row.html\'" ng-init="player = roster.BN5;position = \'BN\'" class="player-row" ng-if="roster.BN5"></tr> </tbody> </table>'),a.put("views/teams.html",'<ng-include src="\'views/teams/header.html\'"></ng-include> <div class="alert bg-success" ng-cloak ng-show="success">{{success}}</div> <div class="row"> <div class="col-sm-12"> <h4 ng-if="!my_teams">No teams</h4> <ul class="list-group"> <li class="list-group-item" ng-repeat="team in my_teams"><a class="name" ng-href="#/teams/edit/{{team.team_id}}">{{team.name}}</a></li> </ul> </div> </div>'),a.put("views/teams/create.html",'<h2>Create a team</h2> <form ng-submit="createTeam()"> <div class="row"> <div class="col-sm-12"> <span class="form-label">Team Name: </span> <input type="text" name="name" ng-model="name" class="form-control"> </div> <div class="col-sm-12"> <br> <input type="submit" value="Add Team" class="btn btn-primary"> </div> </div> </form>'),a.put("views/teams/edit.html",'<ng-include src="\'views/teams/header.html\'"></ng-include> <div class="row"> <div class="col-sm-4 text-right"> <h3>{{points}}</h3> </div> <div class="col-sm-12"> <ng-include src="\'views/roster.html\'" ng-init="showteam = true;roster = my_players;changeRoster = true;showpos = true;showpoints = true;" ng-if="my_players"></ng-include> </div> </div>'),a.put("views/teams/header.html",'<div class="team-header row" ng-show="show_teams" ng-cloak> <div class="container"> <div class="row" ng-if="my_team"> <div class="col-sm-8"> <h2 class="h2">{{my_team.name}}</h2> </div> <div class="col-sm-4 text-right"> <a class="btn btn-default" ng-if="team_id" ng-href="#/teams/players/{{team_id}}">Waiver Wire</a> <a class="btn btn-default" ng-if="team_id" ng-href="#/teams/settings/{{team_id}}">Settings</a> </div> </div> <div class="row" ng-show="show_teams" ng-hide="my_team" ng-cloak> <div class="col-sm-10"> <h2 class="h2">Select Team</h2> </div> <div class="col-sm-2 text-right"> <a ng-href="#/teams/create" class="btn btn-primary">Create New Team</a> </div> </div> </div> </div>'),a.put("views/teams/settings.html",'<div class="row"> <div class="col-sm-12"> <h2>Settings</h2> <form> <div class="form-group"> <label>Team Name: <input type="text" ng-model="new_team_name" class="form-control"> </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="delete_team"> Delete Team </label> </div> <input type="button" value="Save Settings" ng-click="save()" class="btn btn-primary"> <a ng-href="#/teams/edit/{{team_id}}" class="btn btn-default">Cancel</a> </form> </div> </div>'),a.put("views/users.html",'<div class="row"> <div class="col-sm-12"> <h2 class="h2">Players for week {{currentWeek}}</h2> <form class="navbar-form navbar-right" ng-submit="deepSearch()"> <div class="form-group"> <input type="search" class="form-control" ng-model="searchUser" placeholder="Search User..."> <button type="submit" class="btn btn-default" ng-disabled="isSearching === true"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button> <a ng-click="clearSearch()" class="btn btn-danger" ng-show="searchResults.length > 0" ng-cloak>Clear Results</a> </div> </form> <ul class="list-group"> <li class="list-group-item users" ng-repeat="user in userList"> <a class="name">{{user.username}}</a> <div class="buttons"> <div ng-show="users.draftList.indexOf(user.id) < 0 && users.gameList.indexOf(user.id) < 0"> <a ng-click="challengePlayer(user.id)" class="btn btn-primary" ng-hide="friends.draftList.indexOf(user.id) >= 0 || users.draftList.indexOf(user.id) >= 0 || users.sentList.indexOf(user.id) >= 0 || friends.sentList.indexOf(user.id) >= 0">Challenge</a> <a disabled ng-show="users.sentList.indexOf(user.id) >= 0 || friends.sentList.indexOf(user.id) >= 0" class="btn btn-default" ng-cloak>Challenge Sent</a> </div> <a ng-click="addFriend(user.id)" ng-show="user.status == \'available\'" class="btn btn-default">Send Friend Request</a> <span class="btn btn-success" disabled ng-show="user.status == \'accepted\'"><span class="glyphicon glyphicon-ok"></span> Friends</span> <span class="btn btn-default" disabled ng-show="user.status == \'sent\'">Friend Request Sent</span> <a ng-click="acceptFriend(user.id)" class="btn btn-primary" ng-show="user.status == \'requested\'">Accept Friendship</a> </div> </li> </ul> </div> </div>'),a.put("views/weeks.html",'Week: <div class="btn-toolbar"> <div ng-repeat="week in weeks" class="btn-group"> <a ng-click="setWeek(week)" class="btn btn-default" ng-class="{\'active\': currentWeek == week}">{{week}}</a> </div> </div>')}]);